(this["webpackJsonpiis-web"]=this["webpackJsonpiis-web"]||[]).push([[0],{107:function(e,t,n){e.exports={centerContent:"LoginPage_centerContent__HlTp6",loginForm:"LoginPage_loginForm__XLz7O"}},108:function(e,t,n){e.exports={centerContent:"RegisterPage_centerContent__tA340",registerForm:"RegisterPage_registerForm__1uL4m"}},109:function(e,t,n){e.exports={centerContent:"UserManagementPage_centerContent__1_Ysm",bg:"UserManagementPage_bg__3Vl1k",fullCenterContent:"UserManagementPage_fullCenterContent__3lR2d"}},112:function(e,t,n){},117:function(e,t,n){e.exports={centerContent:"NotFoundPage_centerContent__1NeNb"}},119:function(e,t,n){e.exports={centerContent:"ErrorPage_centerContent__1cZEM"}},137:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(40),s=n.n(r),c=(n(112),n(3)),o=n(8),l=n(20),d=n(12),j=n(19),u=n(70),b=n(7),h=n(9),m=n(26),O=n(18),p=n(77),x=n(35),v=n(102),g=n(0),f=Object(a.createContext)({}),y=function(e){var t=e.children,n=Object(a.useState)(!1),i=Object(c.a)(n,2),r=i[0],s=i[1],o=Object(a.useState)({}),l=Object(c.a)(o,2),d={IsLoggedIn:r,setIsLoggedIn:s,User:l[0],setUser:l[1]};return Object(g.jsx)(f.Provider,{value:d,children:t})},_=function(){return Object(a.useContext)(f)};function k(e){var t=_(),n=t.setIsLoggedIn,a=t.User,i=t.IsLoggedIn,r=t.setUser,s=Object(o.f)();return Object(g.jsx)(p.a,{collapseOnSelect:!0,fixed:"top",expand:"lg",bg:"dark",variant:"dark",children:Object(g.jsxs)(l.a,{children:[Object(g.jsx)(p.a.Brand,{as:O.b,to:"/",children:"Aukce"}),Object(g.jsx)(p.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(g.jsx)(p.a.Collapse,{id:"responsive-navbar-nav",children:Object(g.jsxs)(x.a,{className:"ms-auto",children:[Object(g.jsx)(x.a.Item,{children:Object(g.jsx)(x.a.Link,{as:O.b,to:"/",style:"/"===e.page?{color:"white"}:{},children:" Seznam aukc\xed"})}),i&&3==a.role_id&&Object(g.jsx)(x.a.Item,{children:Object(g.jsx)(x.a.Link,{as:O.b,to:"/usr-man",style:"/usr-man"===e.page?{color:"white"}:{},children:" Spr\xe1va u\u017eivatel\u016f"})}),i?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(x.a.Item,{children:Object(g.jsxs)(v.a,{align:"end",menuVariant:"dark",title:a.name,id:"collasible-nav-dropdown",children:[Object(g.jsx)(v.a.Item,{as:O.b,to:"/user-profile",style:"/user-profile"===e.page?{color:"white"}:{},children:" M\u016fj profil "}),Object(g.jsx)(v.a.Item,{onClick:function(){n(!1),r({}),sessionStorage.removeItem("accessToken"),s("/")},children:" Odhl\xe1sit se"})]})})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(x.a.Item,{style:{borderRadius:5,backgroundColor:"#0d6efd"},children:Object(g.jsx)(x.a.Link,{as:O.b,to:"/Login",style:"/Login"===e.page?{color:"white"}:{color:"#cfcfcf"},children:" P\u0159ihl\xe1sit se"})})})]})})]})})}var S=n(107),C=n.n(S);function w(e){var t=_(),n=t.setIsLoggedIn,a=t.setUser,i=Object(o.f)();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(k,{page:"Login"}),Object(g.jsx)(l.a,{style:{height:"100%"},children:Object(g.jsx)(j.a,{style:{height:"100%"},children:Object(g.jsx)(d.a,{className:C.a.centerContent,children:Object(g.jsx)("div",{className:C.a.loginForm,children:Object(g.jsx)(m.a,{initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Nespr\xe1vn\xfd form\xe1t e-mailov\xe9 adresy"):t.email="Nezadali jste e-mailovou adresu",e.password||(t.password="Nezadali jste heslo"),t},onSubmit:function(e,t){console.log(JSON.stringify(e)),fetch("https://iis-api.herokuapp.com/auth/login",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}).then((function(e){return e.text()})).then((function(e){if(console.log(e),"Username or password incorrect"===e)t.setStatus("Zadali jste \u0161patn\xfd e-mail nebo heslo");else{var r=JSON.parse(e);sessionStorage.setItem("accessToken",r.accessToken),n(!0),fetch("https://iis-api.herokuapp.com/users/current",{method:"GET",headers:{Authorization:"Bearer "+r.accessToken}}).then((function(e){return e.text()})).then((function(e){console.log(e),a(JSON.parse(e)),i("/")}))}t.setSubmitting(!1)}))},children:function(e){var t=e.values,n=e.errors,a=e.status,i=e.touched,r=e.handleChange,s=(e.handleBlur,e.handleSubmit),c=e.isSubmitting;return Object(g.jsxs)(b.a,{onSubmit:s,children:[Object(g.jsx)("label",{style:{width:"100%",textAlign:"center",paddingBottom:40,color:"#0d6efd",fontSize:"30px"},children:"Zadejte p\u0159ihla\u0161ovac\xed \xfadaje"}),Object(g.jsxs)(u.a,{controlId:"floatingInput",label:"E-mailov\xe1 adresa",className:"mb-3",children:[Object(g.jsx)(b.a.Control,{type:"text",name:"email",placeholder:"example@domain.net",onChange:r,value:t.email}),n.email&&i.email?Object(g.jsx)("div",{style:{color:"red"},children:n.email}):null]}),Object(g.jsxs)(u.a,{controlId:"floatingPassword",label:"Heslo",children:[Object(g.jsx)(b.a.Control,{type:"password",name:"password",placeholder:"Heslo",onChange:r,value:t.password}),n.password&&i.password?Object(g.jsx)("div",{style:{color:"red"},children:n.password}):null]}),Object(g.jsxs)("div",{style:{paddingTop:30},className:"d-grid align-items-center",children:[Object(g.jsx)(h.a,{variant:"primary",type:"submit",disabled:c,size:"lg",children:"P\u0159ihl\xe1sit se"}),a?Object(g.jsx)("div",{style:{color:"red",width:"100%",paddingTop:10,textAlign:"center"},children:a}):null]}),Object(g.jsxs)("div",{style:{width:"100%",textAlign:"center",paddingTop:10},children:[Object(g.jsx)("label",{style:{marginRight:5},children:"Je\u0161t\u011b nem\xe1te \xfa\u010det?"}),Object(g.jsx)(O.b,{style:{color:"#0d6efd"},to:"/register",children:"Zaregistrujte se!"})]})]})}})})})})})]})}function N(e){var t=_(),n=t.setIsLoggedIn,a=t.setUser,i=Object(o.f)();return Object(g.jsx)(m.a,{initialValues:{email:"",password:"",name:"",surname:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Nespr\xe1vn\xfd form\xe1t e-mailov\xe9 adresy"):t.email="Nezadali jste e-mailovou adresu",e.password?e.password.length<8&&(t.password="Heslo je p\u0159\xedli\u0161 kr\xe1tk\xe9"):t.password="Nezadali jste heslo",e.name||(t.name="Nezadali jste jm\xe9no"),e.surname||(t.surname="Nezadali jste p\u0159\xedjmen\xed"),t},onSubmit:function(e,t){fetch("https://iis-api.herokuapp.com/auth/register",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}).then((function(e){return e.text()})).then((function(e){if("User already exists"==e)t.setStatus("U\u017eivatel ji\u017e existuje");else{var r=JSON.parse(e);sessionStorage.setItem("accessToken",r.accessToken),n(!0),fetch("https://iis-api.herokuapp.com/users/current",{method:"GET",headers:{Authorization:"Bearer "+r.accessToken}}).then((function(e){return e.text()})).then((function(e){console.log(e),a(JSON.parse(e)),i("/")}))}}))},children:function(e){var t=e.values,n=e.errors,a=e.status,i=e.touched,r=e.handleChange,s=(e.handleBlur,e.handleSubmit),c=e.isSubmitting;return Object(g.jsxs)(b.a,{onSubmit:s,children:[Object(g.jsx)("label",{style:{width:"100%",textAlign:"center",paddingBottom:40,color:"#0d6efd",fontSize:"30px"},children:"Registra\u010dn\xed formul\xe1\u0159"}),Object(g.jsxs)(j.a,{className:"mb-3",children:[Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridUsername",children:[Object(g.jsx)(b.a.Label,{children:"E-mailov\xe1 adresa"}),Object(g.jsx)(b.a.Control,{type:"text",name:"email",placeholder:"Zadejte e-mailovou adresu",onChange:r,value:t.email}),n.email&&i.email?Object(g.jsx)("div",{style:{color:"red"},children:n.email}):null]}),Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridPassword",children:[Object(g.jsx)(b.a.Label,{children:"Heslo"}),Object(g.jsx)(b.a.Control,{type:"password",name:"password",placeholder:"Zadejte heslo",onChange:r,value:t.password}),n.password&&i.password?Object(g.jsx)("div",{style:{color:"red"},children:n.password}):null]})]}),Object(g.jsxs)(j.a,{className:"mb-3",children:[Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridName",children:[Object(g.jsx)(b.a.Label,{children:"Jm\xe9no"}),Object(g.jsx)(b.a.Control,{type:"text",name:"name",placeholder:"Zadejte jm\xe9no",onChange:r,value:t.name}),n.name&&i.name?Object(g.jsx)("div",{style:{color:"red"},children:n.name}):null]}),Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridSurname",children:[Object(g.jsx)(b.a.Label,{children:"P\u0159\xedjm\xe9n\xed"}),Object(g.jsx)(b.a.Control,{type:"text",name:"surname",placeholder:"Zadejte p\u0159\xedjmen\xed",onChange:r,value:t.surname}),n.surname&&i.surname?Object(g.jsx)("div",{style:{color:"red"},children:n.surname}):null]})]}),Object(g.jsxs)("div",{style:{paddingTop:30},className:"d-grid align-items-center",children:[Object(g.jsx)(h.a,{variant:"primary",type:"submit",disabled:c,size:"lg",children:"Zaregistovat se"}),a?Object(g.jsx)("div",{style:{color:"red",width:"100%",textAlign:"center"},children:a}):null]})]})}})}var T=n(108),I=n.n(T);function z(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(k,{page:"Home"}),Object(g.jsx)(l.a,{style:{height:"100%"},children:Object(g.jsx)(j.a,{style:{height:"100%"},children:Object(g.jsx)(d.a,{className:I.a.centerContent,children:Object(g.jsx)("div",{className:I.a.registerForm,children:Object(g.jsx)(N,{})})})})})]})}var A=n(71),L=n(73),U=n(2),P=n(14);function B(e){return Object(g.jsxs)(b.a,{onSubmit:e.handleSubmit,children:[Object(g.jsxs)(j.a,{className:"mb-3",children:[Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridEmail",children:[Object(g.jsx)(b.a.Label,{children:"E-mailov\xe1 adresa"}),Object(g.jsx)(b.a.Control,{type:"text",name:"email",placeholder:"Zadejte u\u017eivatelk\xe9 jm\xe9no",onChange:e.handleChange,value:e.values.email}),e.errors.email&&e.touched.email?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.email}):null]}),Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridPassword",children:[Object(g.jsx)(b.a.Label,{children:"Heslo"}),Object(g.jsx)(b.a.Control,{type:"password",name:"password",placeholder:"Zadejte heslo",onChange:e.handleChange,value:e.values.password}),e.errors.password&&e.touched.password?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.password}):null]})]}),Object(g.jsxs)(j.a,{className:"mb-3",children:[Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridName",children:[Object(g.jsx)(b.a.Label,{children:"Jm\xe9no"}),Object(g.jsx)(b.a.Control,{type:"text",name:"name",placeholder:"Zadejte jm\xe9no",onChange:e.handleChange,value:e.values.name}),e.errors.name&&e.touched.name?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.name}):null]}),Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridSurname",children:[Object(g.jsx)(b.a.Label,{children:"P\u0159\xedjmen\xed"}),Object(g.jsx)(b.a.Control,{type:"text",name:"surname",placeholder:"Zadejte p\u0159\xedjmen\xed",onChange:e.handleChange,value:e.values.surname}),e.errors.surname&&e.touched.surname?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.surname}):null]}),Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridRole",children:[Object(g.jsx)(b.a.Label,{children:"Role u\u017eivatele"}),Object(g.jsxs)(b.a.Select,{"aria-label":"V\xfdb\u011br rol\xed",name:"role_id",value:e.values.role_id,onChange:e.handleChange,children:[Object(g.jsx)("option",{children:"Vyberte roli"}),Object(g.jsx)("option",{value:"1",children:"Registrovan\xfd u\u017eivatel"}),Object(g.jsx)("option",{value:"2",children:"Licit\xe1tor"}),Object(g.jsx)("option",{value:"3",children:"Administr\xe1tor"})]}),e.errors.role_id&&e.touched.role_id?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.role_id}):null]})]}),Object(g.jsxs)("div",{style:{wight:"100%"},children:[Object(g.jsx)(h.a,{variant:"primary",style:{maxWidth:200,marginInline:10,float:"right"},type:"submit",disabled:e.isSubmitting,children:"Ulo\u017eit zm\u011bny"}),Object(g.jsx)(h.a,{variant:"secondary",style:{maxWidth:200,marginInline:10,float:"right"},disabled:e.isSubmitting,onClick:e.onHide,children:"Zru\u0161it"})]})]})}function F(e){return Object(g.jsxs)(P.a,Object(U.a)(Object(U.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(g.jsx)(P.a.Header,{closeButton:!0,children:Object(g.jsx)(P.a.Title,{style:{color:"#0d6efd"},id:"contained-modal-title-vcenter",children:"Tvorba nov\xe9ho u\u017eivatele"})}),Object(g.jsx)(P.a.Body,{children:Object(g.jsx)(m.a,{initialValues:{email:e.item.email,password:e.item.password,name:e.item.name,surname:e.item.surname,role_id:e.item.role_id},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Nespr\xe1vn\xfd form\xe1t e-mailov\xe9 adresy"):t.email="Nezadali jste e-mailovou adresu",e.password?e.password.length<8&&(t.password="Heslo je p\u0159\xedli\u0161 kr\xe1tk\xe9"):t.password="Nezadali jste heslo",e.name||(t.name="Nezadali jste jm\xe9no"),e.surname||(t.surname="Nezadali jste p\u0159\xedjmen\xed"),e.role_id||(t.role_id="Vyberte pros\xedm roli u\u017eivatele"),t},onSubmit:function(t,n){e.onSubmit(t,n)},children:function(t){var n=t.values,a=t.errors,i=t.status,r=t.touched,s=t.handleChange,c=t.handleSubmit,o=t.isSubmitting;return Object(g.jsx)(B,{onHide:e.onHide,values:n,errors:a,status:i,touched:r,handleChange:s,handleSubmit:c,isSubmitting:o})}})})]}))}function D(e){return Object(g.jsxs)(P.a,Object(U.a)(Object(U.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(g.jsx)(P.a.Header,{closeButton:!0,children:Object(g.jsx)(P.a.Title,{style:{color:"#0d6efd"},id:"contained-modal-title-vcenter",children:"Upraven\xed u\u017eivatele"})}),Object(g.jsx)(P.a.Body,{children:Object(g.jsx)(m.a,{initialValues:{id:e.item.id,email:e.item.email,password:e.item.password,name:e.item.name,surname:e.item.surname,role_id:e.item.role_id},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Nespr\xe1vn\xfd form\xe1t e-mailov\xe9 adresy"):t.email="Nezadali jste e-mailovou adresu",e.password?e.password.length<8&&(t.password="Heslo je p\u0159\xedli\u0161 kr\xe1tk\xe9"):t.password="Nezadali jste heslo",e.name||(t.name="Nezadali jste jm\xe9no"),e.surname||(t.surname="Nezadali jste p\u0159\xedjmen\xed"),e.role_id||(t.role_id="Vyberte pros\xedm roli u\u017eivatele"),t},onSubmit:function(t,n){e.onSubmit(t,n)},children:function(t){var n=t.values,a=t.errors,i=t.status,r=t.touched,s=t.handleChange,c=t.handleSubmit,o=t.isSubmitting;return Object(g.jsx)(B,{onHide:e.onHide,values:n,errors:a,status:i,touched:r,handleChange:s,handleSubmit:c,isSubmitting:o})}})})]}))}function Z(e){return Object(g.jsxs)(P.a,Object(U.a)(Object(U.a)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(g.jsx)(P.a.Header,{closeButton:!0,children:Object(g.jsx)(P.a.Title,{style:{color:"#0d6efd"},children:"Vymazat u\u017eivatele"})}),Object(g.jsxs)(P.a.Body,{children:["Opravdu chcete vymazat u\u017eivatele: ",e.item.email]}),Object(g.jsxs)(P.a.Footer,{children:[Object(g.jsx)(h.a,{variant:"secondary",onClick:e.onHide,children:"Zru\u0161it"}),Object(g.jsx)(h.a,{variant:"danger",onClick:function(){return e.deleteUser(e)},children:"Vymazat"})]})]}))}var G=n(109),H=n.n(G);function V(e){var t=i.a.useState(null),n=Object(c.a)(t,2),a=n[0],r=n[1],s=i.a.useState(!1),u=Object(c.a)(s,2),b=u[0],m=u[1],O=i.a.useState([]),p=Object(c.a)(O,2),x=p[0],v=p[1],f=Object(o.f)();function y(e){if(e.status>=200&&e.status<=299)return e.json();var t=[];t.ID=e.status,t.Text=e.statusText,r(t),m(!0)}i.a.useEffect((function(){_()}),[]);var _=function(){return fetch("https://iis-api.herokuapp.com/users",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")}}).then(y).then((function(e){v(e),m(!0)})).catch((function(e){console.log(e)}))},k=["Neregistrovan\xfd","U\u017eivatel","Licit\xe1tor","Administr\xe1tor"],S=i.a.useState(!1),C=Object(c.a)(S,2),w=C[0],N=C[1],T=i.a.useState(""),I=Object(c.a)(T,2),z=I[0],U=I[1],P=i.a.useState(!1),B=Object(c.a)(P,2),G=B[0],V=B[1],E=i.a.useState(""),W=Object(c.a)(E,2),J=W[0],R=W[1],K=i.a.useState(!1),M=Object(c.a)(K,2),X=M[0],$=M[1],q=i.a.useState(""),Q=Object(c.a)(q,2),Y=Q[0],ee=Q[1];return a?(console.log(a),Object(g.jsx)(g.Fragment,{children:f("/error/"+a.ID+"/"+a.Text)})):b?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(l.a,{style:{paddingTop:70},children:Object(g.jsx)(j.a,{children:Object(g.jsxs)(d.a,{className:H.a.centerContent,children:[Object(g.jsx)("label",{style:{width:"100%",textAlign:"left",paddingBottom:40,color:"#0d6efd",fontSize:"30px"},children:"Seznam u\u017eivatel\u016f"}),Object(g.jsx)("div",{style:{width:"100%",overflow:"auto"},children:Object(g.jsxs)(A.a,{hover:!0,striped:!0,style:{textAlign:"center"},children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"ID"}),Object(g.jsx)("th",{children:"E-mail"}),Object(g.jsx)("th",{children:"Jm\xe9no"}),Object(g.jsx)("th",{children:"P\u0159\xedjmen\xed"}),Object(g.jsx)("th",{children:"Heslo"}),Object(g.jsx)("th",{children:"Role"}),Object(g.jsx)("th",{children:"Smazat"}),Object(g.jsx)("th",{children:"Upravit"})]})}),Object(g.jsx)("tbody",{children:x.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:e.id}),Object(g.jsx)("td",{children:e.email}),Object(g.jsx)("td",{children:e.name}),Object(g.jsx)("td",{children:e.surname}),Object(g.jsx)("td",{children:e.password}),Object(g.jsx)("td",{children:k[e.role_id]}),Object(g.jsx)("td",{children:Object(g.jsx)(h.a,{onClick:function(){return function(e){ee(e),$(!0)}(e)},style:{border:0,backgroundColor:"#ffffff00"},children:Object(g.jsx)(L.a,{color:"#0d6efd",size:"20"})})}),Object(g.jsx)("td",{children:Object(g.jsx)(h.a,{onClick:function(){return function(e){R(e),V(!0)}(e)},style:{border:0,backgroundColor:"#ffffff00"},children:Object(g.jsx)(L.b,{color:"#0d6efd",size:"24"})})})]},e.id)}))})]})}),Object(g.jsx)("div",{style:{width:"100%",padding:"10px"},children:Object(g.jsx)(h.a,{variant:"primary",onClick:function(){return U({id:null,login:"",email:"",name:"",surname:"",password:"",role_id:null}),void N(!0)},children:"P\u0159idat nov\xe9ho u\u017eivatele"})})]})})}),Object(g.jsx)(F,{show:w,onHide:function(){return N(!1)},item:z,onSubmit:function(e,t){e.role_id=Number(e.role_id),fetch("https://iis-api.herokuapp.com/users",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")},body:JSON.stringify(e)}).then((function(){_(),t.setSubmitting(!1),N(!1)}))}}),Object(g.jsx)(D,{show:G,onHide:function(){return V(!1)},item:J,onSubmit:function(e,t){e.role_id=Number(e.role_id),fetch("https://iis-api.herokuapp.com/users",{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")},body:JSON.stringify(e)}).then((function(){_(),t.setSubmitting(!1),V(!1)}))}}),Object(g.jsx)(Z,{show:X,onHide:function(){return $(!1)},item:Y,deleteUser:function(e){fetch("https://iis-api.herokuapp.com/users/"+e.item.id,{headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")},method:"DELETE"}).then((function(){_(),$(!1)}))}})]}):Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(l.a,{className:H.a.fullCenterContent,children:[Object(g.jsx)("h1",{style:{fontSize:90},children:"Loading"}),Object(g.jsx)(h.a,{variant:"primary",href:"/",size:"lg",style:{margin:20},children:"Home"})]})})}var E=n(117),W=n.n(E);function J(e){return Object(g.jsxs)(l.a,{className:W.a.centerContent,children:[Object(g.jsx)("h1",{style:{fontSize:90},children:"Error 404"}),Object(g.jsx)("h2",{children:" Page not found"}),Object(g.jsx)(h.a,{variant:"primary",href:"/",size:"lg",style:{margin:20},children:"Home"})]})}var R=n(63),K=n.n(R),M=n(24),X=n(47),$=n.n(X);function q(e){return 2==e.state_id&&Date.now()>new Date(e.start_time)&&Date.now()<new Date(e.end_time)?"Aukce prob\xedh\xe1 do "+(null==e.end_time?"":new Date(e.end_time).toLocaleString("cs-CZ")):2==e.state_id&&Date.now()>new Date(e.end_time)?"Aukce byla ukon\u010dena, \u010dek\xe1 se na vyhodnocen\xed":["\u010cek\xe1 se na schv\xe1len\xed licit\xe1torem","Za\u010d\xe1tek napl\xe1nov\xe1n na "+(null==e.start_time?"":new Date(e.start_time).toLocaleString("cs-CZ")),"Zam\xedtnuta","Aukce p\u0159ed\u010dasn\u011b ukon\u010dena, \u010dek\xe1 se na vyhodnocen\xed","Aukce \xfasp\u011b\u0161n\u011b ukon\u010dena, v\xfdhercem je "+(null==e.winner_id?"":e.user_auction_winner_idTouser.name+" "+e.user_auction_winner_idTouser.surname)][e.state_id-1]}function Q(e){var t=Object(o.f)();return e.userLogged&&e.user.role_id>=2&&e.item_prop.author_id!=e.user.id?Object(g.jsx)(M.a.Footer,{children:Object(g.jsxs)("div",{className:$.a.buttonsContainer,children:[Object(g.jsx)(h.a,{variant:"success",className:$.a.buttonApprove,onClick:function(){return e.item_prop.setChangeTime(e.item_prop)},children:"Schv\xe1lit"})," ",Object(g.jsx)(h.a,{variant:"danger",className:$.a.buttonReject,onClick:function(){return fetch("https://iis-api.herokuapp.com/auctions/approve",{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")},body:JSON.stringify({id:e.item_prop.id,state_id:3})}).then((function(e){if(200==e.status)return e;t("/error/"+e.status+"/"+e.text())})).then((function(t){return e.item_prop.loadAuctions()}))},children:"Zam\xedtnout"})]})}):null}function Y(e){var t=Object(o.f)();if(e.userLogged){var n=e.bidders.find((function(t){return t.user_id==e.user.id}));if(n)return n.is_approved?Object(g.jsx)(M.a.Footer,{children:"V t\xe9to aukci jste registrov\xe1n"}):Date.now()>new Date(e.start_time)?Object(g.jsx)(M.a.Footer,{children:"Va\u0161e \u017e\xe1dost o registraci nebyla v\u010das schv\xe1lena"}):Object(g.jsx)(M.a.Footer,{children:"\u010cek\xe1 se na schv\xe1len\xed registrace licit\xe1torem aukce"});if(e.user.id!=e.auctioneer_id&&e.user.id!=e.author_id&&2==e.state_id&&Date.now()<=new Date(e.start_time))return Object(g.jsx)(M.a.Footer,{children:Object(g.jsx)(h.a,{variant:"primary",className:$.a.buttonApprove,onClick:function(){return fetch("https://iis-api.herokuapp.com/bidders",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")},body:JSON.stringify({auction_id:e.id})}).then((function(e){if(200==e.status)return e;t("/error/"+e.status+"/"+e.text())})).then((function(t){return e.loadAuctions()}))},children:"Registrovat se"})})}return null}function ee(e){var t=Object(o.f)();return e.userLogged&&e.user.id==e.author_id?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(M.a.Footer,{children:Object(g.jsxs)(h.a,{variant:"danger",onClick:function(){return fetch("https://iis-api.herokuapp.com/auctions/"+e.id,{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")}}).then((function(e){if(200==e.status)return e;t("/error/"+e.status+"/"+e.text())})).then((function(t){return e.loadAuctions()}))},children:[Object(g.jsx)(L.a,{})," Smazat"]})})}):null}function te(e){var t=_(),n=(t.setIsLoggedIn,t.User),a=t.IsLoggedIn,i=(t.setUser,function(e){var t={"Typ:":e.is_demand?"Popt\xe1vkov\xe1":"Nab\xeddkov\xe1","Pravidla:":e.is_open?"Otev\u0159en\xe1":"Uzav\u0159en\xe1","Licit\xe1tor:":null==e.auctioneer_id?"Nep\u0159i\u0159azen":e.user_auction_auctioneer_idTouser.name+" "+e.user_auction_auctioneer_idTouser.surname,Autor:e.user_auction_author_idTouser.name+" "+e.user_auction_author_idTouser.surname};return t[e.is_open?"Aktu\xe1ln\xed cena:":"Vyvol\xe1vac\xed cena:"]=e.price+"K\u010d",t}(e));return Object(g.jsx)("div",{style:{padding:15},children:Object(g.jsxs)(M.a,{style:{width:400},children:[Object(g.jsxs)(O.b,{to:e.link,children:[Object(g.jsx)(M.a.Img,{variant:"top",src:0==e.photos.length?"https://www.signfix.com.au/wp-content/uploads/2017/09/placeholder-600x400.png":e.photos[0]}),Object(g.jsxs)(M.a.Body,{children:[Object(g.jsx)(M.a.Title,{className:$.a.cardTitle,children:e.name}),Object(g.jsx)(M.a.Text,{children:Object.keys(i).map((function(e){return Object(g.jsxs)("div",{className:$.a.cardItem,children:[" ",Object(g.jsx)("strong",{children:e})," ",i[e],Object(g.jsx)("br",{})]})}))})]}),Object(g.jsx)(M.a.Footer,{children:Object(g.jsx)("span",{className:$.a.cardText,children:Object(g.jsx)(q,Object(U.a)({},e))})})]}),1==e.state_id&&Object(g.jsx)(Q,{user:n,userLogged:a,item_prop:e}),Object(g.jsx)(ee,Object(U.a)({userLogged:a,user:n},e)),a&&n.id==e.auctioneer_id&&Object(g.jsx)(M.a.Footer,{children:"Jste licit\xe1tor t\xe9to aukce"}),a&&n.id==e.author_id&&Object(g.jsx)(M.a.Footer,{children:"Jste autorem t\xe9to aukce"}),Object(g.jsx)(Y,Object(U.a)({userLogged:a,user:n},e))]})})}function ne(e){return Object(g.jsxs)(b.a,{onSubmit:e.handleSubmit,encType:"multipart/form-data",children:[Object(g.jsxs)(j.a,{className:"mb-3",children:[Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridName",children:[Object(g.jsxs)(b.a.Label,{children:["N\xe1zev aukce",Object(g.jsx)("label",{style:{color:"red"},children:"*"})]}),Object(g.jsx)(b.a.Control,{type:"text",name:"name",placeholder:"Zadejte u\u017eivatelk\xe9 jm\xe9no",onChange:e.handleChange,value:e.values.name}),e.errors.name&&e.touched.name?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.name}):null]}),Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridType",children:[Object(g.jsxs)(b.a.Label,{children:["Typ aukce",Object(g.jsx)("label",{style:{color:"red"},children:"*"})]}),Object(g.jsxs)(b.a.Select,{"aria-label":"V\xfdb\u011br typu",name:"is_demand",value:e.values.is_demand,onChange:e.handleChange,children:[Object(g.jsx)("option",{children:"Vyberte typ aukce"}),Object(g.jsx)("option",{value:"true",children:"Popt\xe1vkov\xe1"}),Object(g.jsx)("option",{value:"false",children:"Nab\xeddkov\xe1"})]}),e.errors.is_demand&&e.touched.is_demand?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.is_demand}):null]}),Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridType",children:[Object(g.jsxs)(b.a.Label,{children:["Pravidla aukce",Object(g.jsx)("label",{style:{color:"red"},children:"*"})]}),Object(g.jsxs)(b.a.Select,{"aria-label":"V\xfdb\u011br typu",name:"is_open",value:e.values.is_open,onChange:e.handleChange,children:[Object(g.jsx)("option",{children:"Vyberte typ aukce"}),Object(g.jsx)("option",{value:"true",children:"Otev\u0159en\xe1"}),Object(g.jsx)("option",{value:"false",children:"Uzav\u0159en\xe1"})]}),e.errors.is_open&&e.touched.is_open?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.is_open}):null]})]}),Object(g.jsxs)(j.a,{className:"mb-3",children:[Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridPrice",children:[Object(g.jsxs)(b.a.Label,{children:["Vyvol\xe1vac\xed cena",Object(g.jsx)("label",{style:{color:"red"},children:"*"})]}),Object(g.jsx)(b.a.Control,{type:"number",name:"price",placeholder:"Zadejte vyvol\xe1vac\xed cenu",onChange:e.handleChange}),e.errors.price&&e.touched.price?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.price}):null]}),Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridMinBid",children:[Object(g.jsx)(b.a.Label,{children:"Minim\xe1ln\xed p\u0159\xedhoz"}),Object(g.jsx)(b.a.Control,{type:"number",placeholder:"Toto pole nemus\xed b\xfdt zadan\xe9",name:"mim_bid",onChange:e.handleChange,value:e.values.min_bid})]}),Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridMaxBid",children:[Object(g.jsx)(b.a.Label,{children:"Maxim\xe1ln\xed p\u0159\xedhoz"}),Object(g.jsx)(b.a.Control,{type:"number",placeholder:"Toto pole nemus\xed b\xfdt zadan\xe9",name:"max_bid",onChange:e.handleChange,value:e.values.max_bid})]})]}),Object(g.jsx)(j.a,{className:"mb-3",children:Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formFile",children:[Object(g.jsxs)(b.a.Label,{children:["Obr\xe1zky",Object(g.jsx)("label",{style:{color:"red"},children:"*"})]}),Object(g.jsx)(b.a.Control,{type:"file",accept:"image/*",multiple:!0,name:"files",onChange:function(t){e.setFieldValue("files",t.target.files)}}),e.errors.files&&e.touched.files?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.files}):null]})}),Object(g.jsx)(j.a,{className:"mb-3",children:Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridDescription",children:[Object(g.jsxs)(b.a.Label,{children:["Popisek",Object(g.jsx)("label",{style:{color:"red"},children:"*"})]}),Object(g.jsx)(b.a.Control,{as:"textarea",name:"description",placeholder:"Zadejte popisek",onChange:e.handleChange,value:e.values.description}),e.errors.description&&e.touched.description?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.description}):null]})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{style:{color:"red"},children:"* po\u017eadovan\xe9 pole"}),Object(g.jsx)(h.a,{variant:"primary",style:{maxWidth:200,marginInline:10,float:"right"},type:"submit",disabled:e.isSubmitting,children:"Ulo\u017eit zm\u011bny"}),Object(g.jsx)(h.a,{variant:"secondary",style:{maxWidth:200,marginInline:10,float:"right"},disabled:e.isSubmitting,onClick:e.onHide,children:"Zru\u0161it"})]})]})}function ae(e){return Object(g.jsxs)(P.a,Object(U.a)(Object(U.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(g.jsx)(P.a.Header,{closeButton:!0,children:Object(g.jsx)(P.a.Title,{style:{color:"#0d6efd"},id:"contained-modal-title-vcenter",children:"Tvorba nov\xe9 aukce"})}),Object(g.jsx)(P.a.Body,{children:Object(g.jsx)(m.a,{initialValues:{name:e.item.name,is_open:e.item.is_open,is_demand:e.item.is_demand,price:e.item.price,min_bid:e.item.min_bid,max_bid:e.item.max_bid,description:e.item.description,files:e.item.files},validate:function(e){var t={};return e.name||(t.name="Nezadali jste jm\xe9no aukce"),e.is_open||(t.is_open="Vyberte pros\xedm typ aukce"),e.is_demand||(t.is_demand="Vyberte pros\xedm pravidla aukce"),e.price||(t.price="Nezadali jste vyvol\xe1vac\xed cenu"),e.files||(t.files="Nevybrali jste \u017e\xe1dn\xfd obr\xe1zek"),e.description||(t.description="Nezadali jste popisek"),t},onSubmit:function(t,n){e.onSubmit(t,n)},children:function(t){var n=t.values,a=t.errors,i=(t.status,t.touched),r=t.handleChange,s=t.handleSubmit,c=t.isSubmitting,o=t.setFieldValue;return Object(g.jsx)(ne,{onHide:e.onHide,values:n,errors:a,touched:i,handleChange:r,handleSubmit:s,isSubmitting:c,setFieldValue:o})}})})]}))}function ie(e){return Object(g.jsxs)(b.a,{onSubmit:e.handleSubmit,children:[Object(g.jsxs)(j.a,{className:"mb-3",children:[Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridStartTime",children:[Object(g.jsx)(b.a.Label,{children:"\u010cas za\u010d\xe1tku aukce"}),Object(g.jsx)(b.a.Control,{type:"datetime-local",name:"start_time",placeholder:"Zadejte \u010das za\u010d\xe1tku aukce",onChange:e.handleChange,value:e.values.start_time}),e.errors.start_time&&e.touched.start_time?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.start_time}):null]}),Object(g.jsxs)(b.a.Group,{style:{minWidth:200},as:d.a,controlId:"formGridEndTime",children:[Object(g.jsx)(b.a.Label,{children:"\u010cas konce aukce"}),Object(g.jsx)(b.a.Control,{type:"datetime-local",name:"end_time",placeholder:"Zadejte \u010das konce aukce",onChange:e.handleChange,value:e.values.end_time}),e.errors.end_time&&e.touched.end_time?Object(g.jsx)("div",{style:{color:"red"},children:e.errors.end_time}):null]})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)(h.a,{variant:"primary",style:{maxWidth:200,marginInline:10,float:"right"},type:"submit",disabled:e.isSubmitting,children:"Ulo\u017eit zm\u011bny"}),Object(g.jsx)(h.a,{variant:"secondary",style:{maxWidth:200,marginInline:10,float:"right"},disabled:e.isSubmitting,onClick:e.onHide,children:"Zru\u0161it"})]})]})}function re(e){return Object(g.jsxs)(P.a,Object(U.a)(Object(U.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(g.jsx)(P.a.Header,{closeButton:!0,children:Object(g.jsx)(P.a.Title,{style:{color:"#0d6efd"},id:"contained-modal-title-vcenter",children:"Nastaven\xed \u010dasu aukce"})}),Object(g.jsx)(P.a.Body,{children:Object(g.jsx)(m.a,{initialValues:{start_time:e.start_time,end_time:e.end_time},validate:function(e){var t={};return e.start_time?e.end_time?e.end_time<=e.start_time&&(t.end_time="Konec aukce mus\xed b\xfdt pozd\u011bji ne\u017e za\u010d\xe1tek"):t.end_time="Nenastavili jste konec aukce":t.start_time="Nenastavili jste za\u010d\xe1tek aukce",t},onSubmit:function(t,n){console.log(e),fetch("https://iis-api.herokuapp.com/auctions/approve",{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")},body:JSON.stringify({id:e.id,state_id:2,start_time:new Date(t.start_time),end_time:new Date(t.end_time)})}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).then((function(t){e.loadAuctions(),n.setSubmitting(!1),e.onHide()}))},children:function(t){var n=t.values,a=t.errors,i=(t.status,t.touched),r=t.handleChange,s=t.handleSubmit,c=t.isSubmitting,o=t.setFieldValue;return Object(g.jsx)(ie,{onHide:e.onHide,values:n,errors:a,touched:i,handleChange:r,handleSubmit:s,isSubmitting:c,setFieldValue:o})}})})]}))}var se=n(120);function ce(e){var t=i.a.useState(!1),n=Object(c.a)(t,2),r=n[0],s=n[1],o=i.a.useState(""),d=Object(c.a)(o,2),j=d[0],u=d[1],b=function(e){u(e),s(!0)},m=i.a.useState(!1),O=Object(c.a)(m,2),p=O[0],x=O[1],v=i.a.useState(""),f=Object(c.a)(v,2),y=f[0],k=f[1],S=_(),C=(S.setIsLoggedIn,S.User),w=(S.IsLoggedIn,S.setUser,Object(a.useState)(null)),N=Object(c.a)(w,2),T=N[0],I=N[1],z=Object(a.useState)(!1),A=Object(c.a)(z,2),L=A[0],P=A[1],B=Object(a.useState)([]),F=Object(c.a)(B,2),D=F[0],Z=F[1],G=function(){return fetch("https://iis-api.herokuapp.com/auctions").then((function(e){return e.json()})).then((function(e){P(!0),Z(e)}),(function(e){P(!0),I(e)}))};Object(a.useEffect)((function(){G()}),[]);var H=[{value:"1",label:"Neschv\xe1lena"},{value:"3",label:"Zam\xedtnuta"},{value:"6",label:"Napl\xe1nov\xe1na"},{value:"7",label:"Prob\xedhaj\xedc\xed"},{value:"8",label:"Ukon\u010deno p\u0159ij\xedm\xe1n\xed nab\xeddek"},{value:"5",label:"Vyhodnocena"}],V=Object(a.useState)([]),E=Object(c.a)(V,2),W=E[0],J=E[1];return T?Object(g.jsxs)("div",{children:["Error: ",T.message]}):L?Object(g.jsxs)(g.Fragment,{children:[W.map((function(e){return console.log("jede tooo")})),Object(g.jsxs)(l.a,{className:"mainContainer",children:[Object(g.jsxs)("div",{style:{display:"flex"},children:[Object(g.jsx)("div",{style:{flex:.8},children:Object(g.jsx)("h1",{style:{paddingBottom:0},children:" P\u0159ehled aukc\xed"})}),Object(g.jsx)("div",{style:{flex:.2,textAlign:"right",padding:20},children:Object(g.jsx)(h.a,{variant:"primary",onClick:function(){return k({id:null,name:"",is_demand:null,is_open:null,price:null,author_id:null,auctioneer_id:null,start_time:null,end_time:null,description:"",photos:null,winner_id:null,state_id:null,min_bid:null,max_bid:null}),void x(!0)},children:"P\u0159idat novou aukci"})})]}),Object(g.jsx)("div",{style:{padding:10},children:Object(g.jsx)(se.a,{options:H,value:W,onChange:J,overrideStrings:{allItemsAreSelected:"Jsou vybr\xe1ny v\u0161echny mo\u017enosti",clearSearch:"Vymazat vyhled\xe1v\xe1n\xed",clearSelected:"Zru\u0161it vybran\xe9",noOptions:"\u017d\xe1dn\xe9 mo\u017enosti",search:"Vyhledat",selectAll:"Vybrat v\u0161echny stavy",selectAllFiltered:"Vybrat v\u0161e (vyfiltrovan\xe9)",selectSomeItems:"Stav aukce",create:"Vytvo\u0159it"}})}),Object(g.jsx)("div",{className:K.a.flexContainer,children:function(e){if(console.log("vybrano:"),console.log(W),0==W.length||W.length==H.length)return e;var t=function(){var t=[],n=function(n){W.forEach((function(a){2==e[n].state_id?("6"==a.value&&e[n].start_time>Date.now()||"7"==a.value&&new Date(e[n].start_time)<=Date.now()&&new Date(e[n].end_time)>Date.now()||"8"==a.value&&new Date(e[n].end_time)<=Date.now())&&t.push(e[n]):e[n].state_id==a.value&&t.push(e[n])}))};for(var a in e)n(a);return{v:t}}();return"object"===typeof t?t.v:void 0}(D).map((function(e){return Object(g.jsx)(te,Object(U.a)(Object(U.a)({},e),{},{setChangeTime:b,link:"/auction-detail/"+e.id,loadAuctions:G}))}))})]}),Object(g.jsx)(ae,{show:p,onHide:function(){return x(!1)},item:y}),Object(g.jsx)(re,Object(U.a)({show:r,onHide:function(){return s(!1)},loadAuctions:G,user:C},j))]}):Object(g.jsx)("div",{children:"Loading..."})}var oe=n(110),le=n(121),de=n(76),je=n(69),ue=n(36),be=n.n(ue),he=n(118),me=n.n(he);function Oe(e){var t=Object(o.f)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(m.a,{initialValues:{bid:""},validate:function(t){var n={},a=0==e.bid.length?e.price:e.bid[e.bid.length-1].price;return Number(t.bid)<=0?n.bid="Nab\xeddka mus\xed b\xfdt v\u011bt\u0161\xed ne\u017e 0 K\u010d":e.is_demand&&a>=t.bid?n.bid="Nov\xe1 nab\xeddka mus\xed b\xfdt v popt\xe1vkov\xe9 aukc\xed vy\u0161\u0161\xed ne\u017e aktu\xe1ln\xed cena":!e.is_demand&&t.bid>=a?n.bid="Nov\xe1 nab\xeddka mus\xed b\xfdt v nab\xeddkov\xe9 aukci ni\u017e\u0161\xed ne\u017e aktu\xe1ln\xed cena":null!=e.min_bid&&Math.abs(a-Number(t.bid))<e.min_bid?n.bid="Minim\xe1ln\xed"+(e.is_demand?" p\u0159\xedhoz ":" sn\xed\u017een\xed nab\xeddky ")+"pro tuto aukci je "+e.min_bid:null!=e.max_bid&&Math.abs(a-Number(t.bid))>e.max_bid&&(n.bid="Maxim\xe1ln\xed"+(e.is_demand?" p\u0159\xedhoz ":" sn\xed\u017een\xed nab\xeddky ")+"pro tuto aukci je "+e.max_bid),n},onSubmit:function(n,a){fetch("https://iis-api.herokuapp.com/bids",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")},body:JSON.stringify({auction_id:e.id,price:n.bid,time:Date.now()})}).then((function(n){200==n.status?(e.loadAuction(),a.setSubmitting(!1)):t("/error/"+n.status+"/"+n.text())}))},children:function(e){e.values;var t=e.errors,n=(e.status,e.touched,e.handleChange),a=(e.handleBlur,e.handleSubmit),i=e.isSubmitting;return Object(g.jsxs)(b.a,{onSubmit:a,style:{paddingTop:25},children:[Object(g.jsxs)(de.a,{className:"mb-3",children:[Object(g.jsx)(je.a,{style:{maxWidth:250},onChange:n,placeholder:"V\xfd\u0161e nab\xeddky","aria-label":"V\xfd\u0161e nab\xeddky","aria-describedby":"basic-addon1",type:"number",name:"bid",required:!0}),Object(g.jsx)(de.a.Text,{id:"basic-addon1",children:"K\u010d"})]}),t.bid?Object(g.jsx)("div",{style:{color:"red",paddingTop:2},children:t.bid}):null,Object(g.jsx)("div",{children:Object(g.jsx)(h.a,{style:{marginTop:10},disabled:i||t.bid,variant:"primary",type:"submit",children:"Odeslat nab\xeddku"})})]})}})})}function pe(e){var t=Object(a.useRef)(null),n=Object(a.useState)(null),i=Object(c.a)(n,2),r=i[0],s=i[1],l=function(e,t){"is-valid"===e?(t.current.classList.remove("is-invalid"),t.current.classList.add("is-valid")):"is-invalid"===e&&(t.current.classList.remove("is-valid"),t.current.classList.add("is-invalid"))},d=Object(o.f)();return Object(g.jsxs)(b.a,{style:{paddingTop:20},onSubmit:function(e){e.preventDefault()},children:[Object(g.jsxs)(de.a,{children:[Object(g.jsx)(je.a,{style:{maxWidth:250},ref:t,placeholder:"Nov\xe1 cena","aria-label":"Nov\xe1 cena","aria-describedby":"basic-addon1",value:e.BidPrice,onChange:function(n){e.setBidPrice(n.target.value),function(n){var a=Number(n),i=Number(e.price);n<=0?(s("Nab\xeddka mus\xed b\xfdt kladn\xe9 \u010d\xedslo"),l("is-invalid",t)):a<i&&e.is_demand?(s("Nab\xeddka mus\xed b\xfdt v popt\xe1vkov\xe9 aukci vy\u0161\u0161\xed ne\u017e vyvol\xe1vac\xed cena"),l("is-invalid",t)):a>i&&!e.is_demand?(s("Nab\xeddka mus\xed b\xfdt v nab\xeddkov\xe9 aukci men\u0161\xed ne\u017e vyvol\xe1vac\xed cena"),l("is-invalid",t)):(s(""),l("is-valid",t))}(n.target.value)},type:"number",name:"bid",disabled:!e.BidPriceEditing}),Object(g.jsx)(de.a.Text,{id:"basic-addon1",children:"CZK"})]}),Object(g.jsx)("div",{style:{color:"red",paddingTop:5},children:r}),Object(g.jsx)("div",{style:{paddingTop:10},children:e.BidPriceEditing?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(h.a,{variant:"primary",onClick:function(){!function(){if(""==r){l("is-valid",t),e.setBidPriceEditing(!1),e.setLastBidPrice(e.BidPrice);var n=e.bid.find((function(t){return t.user_id==e.User.id}));return fetch("https://iis-api.herokuapp.com/bids",{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")},body:JSON.stringify({auction_id:e.id,price:Number(e.BidPrice),time:n.time})}).then((function(e){200==e.status?l("is-valid",t):d("/error/"+e.status+"/"+e.text())}))}l("is-invalid",t)}()},disabled:""!=r,children:"Potvrdit novou nab\xeddku"})," ",Object(g.jsx)(h.a,{variant:"secondary",onClick:function(){e.setBidPriceEditing(!1),e.setBidPrice(e.LastBidPrice),t.current.classList.remove("is-valid"),t.current.classList.remove("is-invalid"),s("")},children:"Zru\u0161it"})]}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(h.a,{variant:"primary",type:"submit",onClick:function(){return e.setBidPriceEditing(!0)},children:"Upravit nab\xeddku"})})})]})}function xe(e){return e.User.id==e.auctioneer_id&&Date.now()>=new Date(e.end_time)?Object(g.jsx)("div",{style:{flex:.3,padding:35},children:Object(g.jsx)(h.a,{variant:"primary",children:"Ukon\u010dit a ur\u010dit v\xfdherce"})}):null}function ve(e){var t;return t=e.is_open&&1!=e.state_id&&0!=e.bid.length?"Aktu\xe1ln\xed cena: "+e.bid[e.bid.length-1].price+" K\u010d":"Vyvol\xe1vac\xed cena: "+e.price+" K\u010d",Object(g.jsx)("div",{className:be.a.priceStyle,children:t})}function ge(e){return e.UserLogged&&e.bidders&&e.bidders.some((function(t){return t.user_id==e.User.id}))&&2==e.state_id&&Date.now()>new Date(e.start_time)&&Date.now()<new Date(e.end_time)?e.is_open?Object(g.jsx)(Oe,Object(U.a)(Object(U.a)({},e),{},{loadAuction:e.loadAuction})):Object(g.jsx)(pe,Object(U.a)(Object(U.a)({},e),{},{loadAuction:e.loadAuction})):null}function fe(e){return e.bid&&e.bid.sort((function(e,t){return e.time<t.time?1:e.time>t.time?-1:0})),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(A.a,{striped:!0,style:{textAlign:"center"},children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{id:"jmeno",children:"Jm\xe9no"}),Object(g.jsx)("th",{children:"P\u0159\xedjmen\xed"}),Object(g.jsx)("th",{children:"\u010cas"}),Object(g.jsx)("th",{children:"\u010c\xe1stka"})]})}),Object(g.jsx)("tbody",{children:e.bid&&e.bid.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:e.user.name}),Object(g.jsx)("td",{children:e.user.surname}),Object(g.jsx)("td",{children:new Date(e.time).toLocaleString("cs-CZ")}),Object(g.jsxs)("td",{children:[e.price," K\u010d"]})]})}))})]},"jmeno")})}function ye(e){return e.bidders&&e.bidders.sort((function(e,t){return e.user.surname<t.user.surname?1:e.user.surname>t.user.surname?-1:0})),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(A.a,{striped:!0,style:{textAlign:"center"},children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"Jm\xe9no"}),Object(g.jsx)("th",{children:"P\u0159\xedjmen\xed"}),Object(g.jsx)("th",{children:"Stav registrace"})]})}),Object(g.jsx)("tbody",{children:e.bidders&&e.bidders.map((function(t){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:t.user.name}),Object(g.jsx)("td",{children:t.user.surname}),e.UserLogged&&e.User.id==e.auctioneer_id?Object(g.jsx)("td",{children:t.is_approved?Object(g.jsx)(h.a,{variant:"danger",disabled:Date.now()>new Date(e.start_time),onClick:function(){return e.approveBidder(e.id,t.user.id,!1)},children:"Zru\u0161it registraci"}):Object(g.jsx)(h.a,{variant:"primary",disabled:Date.now()>new Date(e.start_time),onClick:function(){return e.approveBidder(e.id,t.user.id,!0)},children:"Schv\xe1lit registraci"})}):Object(g.jsx)("td",{children:t.is_approved?"Potvrzen":"Nepotvrzen"})]})}))})]})})}function _e(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),i=n[0],r=n[1],s=Object(a.useState)(""),d=Object(c.a)(s,2),j=d[0],u=d[1],b=Object(a.useState)(""),h=Object(c.a)(b,2),m=h[0],O=h[1],p=_(),x=(p.setIsLoggedIn,p.User),v=p.IsLoggedIn,f=(p.setUser,Object(o.g)().auctionId),y=Object(a.useState)(null),k=Object(c.a)(y,2),S=k[0],C=k[1],w=Object(a.useState)(!1),N=Object(c.a)(w,2),T=N[0],I=N[1],z=Object(a.useState)([]),A=Object(c.a)(z,2),L=A[0],P=A[1],B=Object(a.useState)(),F=Object(c.a)(B,2),D=(F[0],F[1],function(){return fetch("https://iis-api.herokuapp.com/auctions/"+f).then((function(e){return e.json()})).then((function(e){if(I(!0),P(e),v&&L.bid){var t=L.bid.filter((function(e){return e.user_id==x.id}));0!=t.length&&u(t[0].price)}}),(function(e){I(!0),C(e)}))});Object(a.useEffect)((function(){D()}),[]);var Z=[];for(var G in L.photos)Z[G]={url:L.photos[G]};0==Z.length&&(Z=[{url:"https://www.signfix.com.au/wp-content/uploads/2017/09/placeholder-600x400.png"}]);var H=3==L.state_id||2==L.state_id&&new Date(L.start_time)>Date.now()&&L.auctioneer_id!=x.id;return S?Object(g.jsxs)("div",{children:["Error: ",S.message]}):T?Object(g.jsxs)(g.Fragment,{children:[3==L.state_id&&Object(g.jsx)("span",{style:{color:"#dc3545"},className:be.a.textStateCenter,children:"Aukce nebyla schv\xe1lena"}),H&&Object(g.jsxs)("span",{style:{color:"#0d6efd"},className:be.a.textStateCenter,children:["Aukce za\u010dne ",new Date(L.start_time).toLocaleString("cs-CZ")]}),Object(g.jsxs)(l.a,{className:"mainContainer",style:H?{opacity:.25}:{opacity:1},children:[Object(g.jsxs)("div",{style:{display:"flex"},children:[Object(g.jsxs)("div",{style:{flex:.7},children:[Object(g.jsx)("h1",{style:{paddingBottom:0},children:L.name}),Object(g.jsx)("h4",{style:{paddingBottom:25},children:L.is_demand?"Popt\xe1vkov\xe1 aukce":"Nab\xeddkov\xe1 aukce"})]}),Object(g.jsx)(xe,Object(U.a)({User:x},L))]}),Object(g.jsxs)(l.a,{style:{display:"flex"},children:[Object(g.jsx)("div",{style:{flex:1,paddingRight:100,width:300,height:300,position:"relative"},children:Object(g.jsx)(me.a,{width:550,height:309,images:Z,showBullets:!0,showNavs:!0})}),Object(g.jsxs)("div",{style:{flex:1},children:[Object(g.jsxs)("p",{children:[Object(g.jsx)("strong",{children:"Popis: "}),L.description]}),Object(g.jsx)(ve,Object(U.a)({},L)),Object(g.jsxs)("div",{className:be.a.auctionInfoItem,children:[Object(g.jsx)("strong",{children:"Konec aukce: "}),1==L.state_id?"Neur\u010den":new Date(L.end_time).toLocaleString("cs-CZ")]}),Object(g.jsxs)("div",{className:be.a.auctionInfoItem,children:[Object(g.jsx)("strong",{children:"Typ: "}),L.is_demand?"Popt\xe1vkov\xe1":"Nab\xeddkov\xe1"]}),Object(g.jsxs)("div",{className:be.a.auctionInfoItem,children:[Object(g.jsx)("strong",{children:"Pravidla: "}),L.is_open?"Otev\u0159en\xe1":"Uzav\u0159en\xe1"]}),Object(g.jsxs)("div",{className:be.a.auctionInfoItem,children:[Object(g.jsx)("strong",{children:"Licit\xe1tor: "}),null==L.auctioneer_id?"Nep\u0159i\u0159azen":L.user_auction_author_idTouser&&L.user_auction_auctioneer_idTouser.name+" "+L.user_auction_auctioneer_idTouser.surname]}),Object(g.jsxs)("div",{className:be.a.auctionInfoItem,children:[Object(g.jsx)("strong",{children:"Autor: "}),L.user_auction_author_idTouser&&L.user_auction_author_idTouser.name+" "+L.user_auction_author_idTouser.surname]}),L.is_open&&Object(g.jsxs)("div",{className:be.a.auctionInfoItem,children:[Object(g.jsxs)("strong",{children:["Minim\xe1ln\xed ",L.is_demand?"p\u0159\xedhoz: ":"sn\xed\u017een\xed nab\xeddky: "]})," ",null==L.min_bid?"Neomezen":L.min_bid+"K\u010d"]}),L.is_open&&Object(g.jsxs)("div",{className:be.a.auctionInfoItem,children:[Object(g.jsxs)("strong",{children:["Maxim\xe1ln\xed ",L.is_demand?"p\u0159\xedhoz: ":"sn\xed\u017een\xed nab\xeddky: "]})," ",null==L.max_bid?"Neomezen":L.max_bid+"K\u010d"]}),Object(g.jsx)(ge,Object(U.a)(Object(U.a)({},L),{},{UserLogged:v,User:x,BidPriceEditing:i,setBidPriceEditing:r,LastBidPrice:j,setLastBidPrice:u,BidPrice:m,setBidPrice:O,loadAuction:D}))]})]}),Object(g.jsx)("div",{style:{marginTop:100},children:Object(g.jsxs)(le.a,{defaultActiveKey:L.is_open?"History":"RegisteredUsers",id:"uncontrolled-tab-example",className:"mb-3",children:[L.is_open&&new Date(L.start_time)<=Date.now()&&Object(g.jsxs)(oe.a,{eventKey:"History",title:"Historie nab\xeddek",children:[Object(g.jsx)("h2",{children:"Historie nab\xeddek"}),Object(g.jsx)(fe,Object(U.a)({},L))]}),Object(g.jsxs)(oe.a,{eventKey:"RegisteredUsers",title:"Registrov\xe1n\xed u\u017eivatel\xe9 v aukci",children:[Object(g.jsx)("h2",{children:"Registrov\xe1n\xed u\u017eivatel\xe9 v aukci"}),L.bidders&&0==L.bidders.length?"Nikdo nen\xed v aukci registrov\xe1n":Object(g.jsx)(ye,Object(U.a)(Object(U.a)({},L),{},{User:x,UserLogged:v,approveBidder:function(e,t,n){var a=Object(o.f)();return fetch("https://iis-api.herokuapp.com/bidders/",{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")},body:JSON.stringify({auction_id:e,user_id:t,is_approved:n})}).then((function(e){200==e.status?D():a("/error/"+e.status+"/"+e.text())}))}}))]})]})})]})]}):Object(g.jsx)("div",{children:"Loading..."})}function ke(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],i=t[1],r=_(),s=(r.setIsLoggedIn,r.User),o=(r.IsLoggedIn,r.setUser,Object(a.useState)(null)),d=Object(c.a)(o,2),j=d[0],u=d[1],b=Object(a.useState)(!1),h=Object(c.a)(b,2),m=h[0],O=h[1];return Object(a.useEffect)((function(){fetch("https://iis-api.herokuapp.com/auctions").then((function(e){return e.json()})).then((function(e){O(!0),i(e)}),(function(e){O(!0),u(e)}))}),[]),j?Object(g.jsxs)("div",{children:["Error: ",j.message]}):m?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(l.a,{className:"mainContainer",children:[Object(g.jsx)("h1",{children:s.name+" "+s.surname}),Object(g.jsxs)("div",{style:{fontSize:20},children:[Object(g.jsxs)("p",{children:["Email: ",s.email]}),Object(g.jsxs)("p",{children:["Role: ",s.role.name]})]}),Object(g.jsxs)(le.a,{defaultActiveKey:"MyAuctions",id:"uncontrolled-tab-example",className:"mb-3",children:[Object(g.jsxs)(oe.a,{eventKey:"MyAuctions",title:"Moje aukce",children:[Object(g.jsx)("h2",{children:"Moje aukce"}),Object(g.jsx)(l.a,{className:K.a.flexContainer,children:n.map((function(e){return e.author_id===s.id?Object(g.jsx)(te,Object(U.a)(Object(U.a)({},e),{},{link:"/auction-detail/"+e.id})):null}))})]}),Object(g.jsxs)(oe.a,{eventKey:"RegisteredAuctions",title:"Aukce, do kter\xfdch jste se registroval",children:[Object(g.jsx)("h2",{children:"Aukce, do kter\xfdch jste se registroval"}),Object(g.jsx)(l.a,{className:K.a.flexContainer,children:n.map((function(e){if(e.bidders.some((function(e){return e.user_id==s.id})))return Object(g.jsx)(te,Object(U.a)(Object(U.a)({},e),{},{link:"/auction-detail/"+e.id}))}))})]}),s.role_id>1?Object(g.jsxs)(oe.a,{eventKey:"AuctioneerAuctions",title:"Aukce, v kter\xfdch jste licit\xe1torem ",children:[Object(g.jsx)("h2",{children:"Aukce, v kter\xfdch jste licit\xe1torem "}),Object(g.jsx)(l.a,{className:K.a.flexContainer,children:n.map((function(e){if(e.auctioneer_id==s.id)return Object(g.jsx)(te,Object(U.a)(Object(U.a)({},e),{},{link:"/auction-detail/"+e.id}))}))})]}):""]})]})}):Object(g.jsx)("div",{children:"Loading..."})}var Se=n(119),Ce=n.n(Se);function we(e){var t=Object(o.g)(),n=t.errorId,a=t.errorText;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(l.a,{className:Ce.a.centerContent,children:[Object(g.jsx)("h1",{style:{fontSize:90},children:n}),Object(g.jsxs)("h2",{children:[" ",a]}),Object(g.jsx)(h.a,{variant:"primary",href:"/",size:"lg",style:{margin:20},children:"Home"})]})})}function Ne(){var e=Object(o.e)().pathname;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(k,{page:e}),Object(g.jsxs)(o.c,{children:[Object(g.jsx)(o.a,{path:"/",element:Object(g.jsx)(ce,{})}),Object(g.jsx)(o.a,{path:"/login",element:Object(g.jsx)(w,{})}),Object(g.jsx)(o.a,{path:"/register",element:Object(g.jsx)(z,{})}),Object(g.jsx)(o.a,{path:"/user-profile",element:Object(g.jsx)(ke,{})}),Object(g.jsx)(o.a,{path:"/auction-detail/:auctionId",element:Object(g.jsx)(_e,{})}),Object(g.jsx)(o.a,{path:"/usr-man",element:Object(g.jsx)(V,{})}),Object(g.jsx)(o.a,{path:"*",element:Object(g.jsx)(J,{})}),Object(g.jsx)(o.a,{path:"/error/:errorId/:errorText",element:Object(g.jsx)(we,{})})]})]})}var Te=function(){var e=_(),t=e.setIsLoggedIn,n=(e.User,e.IsLoggedIn,e.setUser),i=Object(a.useState)(null),r=Object(c.a)(i,2),s=r[0],o=r[1],d=Object(a.useState)(!1),j=Object(c.a)(d,2),u=j[0],b=j[1];return Object(a.useEffect)((function(){null!=sessionStorage.getItem("accessToken")?fetch("https://iis-api.herokuapp.com/users/current",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer "+sessionStorage.getItem("accessToken")}}).then((function(e){return e.json()})).then((function(e){b(!0),n(e),t(!0)}),(function(e){b(!0),o(e)})):b(!0)}),[]),s?Object(g.jsxs)("div",{children:["Error: ",s.message]}):u?Object(g.jsx)(Ne,{}):Object(g.jsx)(l.a,{className:"fullCenterContent",children:Object(g.jsx)("h1",{style:{fontSize:90},children:"Loading..."})})};s.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(O.a,{children:Object(g.jsx)(y,{children:Object(g.jsx)(Te,{})})})}),document.getElementById("root"))},36:function(e,t,n){e.exports={auctionInfoItem:"AuctionDetailPage_auctionInfoItem__ptXwU",priceStyle:"AuctionDetailPage_priceStyle__3XK4d",textStateCenter:"AuctionDetailPage_textStateCenter__1oXtt"}},47:function(e,t,n){e.exports={cardItem:"previewCard_cardItem__1Adpc",buttonApprove:"previewCard_buttonApprove__2BeGC",buttonReject:"previewCard_buttonReject__2LvOa",buttonsContainer:"previewCard_buttonsContainer__2UNHD",rejectedText:"previewCard_rejectedText__3pu_N",approvedText:"previewCard_approvedText__KjD97",cardTitle:"previewCard_cardTitle__oDzau",notApproved:"previewCard_notApproved__TQWGr",cardText:"previewCard_cardText__39SsU"}},63:function(e,t,n){e.exports={flexContainer:"AuctionsPage_flexContainer__1Z2qb"}}},[[137,1,2]]]);